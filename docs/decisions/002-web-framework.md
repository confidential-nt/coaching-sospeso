# 웹 프레임워크 : Astro 와 React

상태 : accepted

## 역사

### 2024년 10월 18일 탐정토끼가 일단 Astro로 시작함

## 맥락

[프로그래밍 언어 의사결정]()에서 이야기했던 것처럼, 대중적이면서도 새로운 걸 배울 수 있는 곳이기를 바랍니다. 그래서 마이너한 프레임워크라도 기회를 주고 열린 마음으로 검토해보고자 합니다.

일단 시작을 빠르게 가져가고, 생산성을 높이며, 배포를 단순하게 하기 위해서 서버리스를 지원하는 풀스택 프레임워크를 사용하고 싶습니다. 

세상에 풀스택 프레임워크는 많습니다. React 생태계에는 Next와 Remix가 있고요. 마이너한 SolidStart, Sveltekit, Qwik 등도 있습니다.

한편 코칭 소스페소는 그렇게 상호작용이 많은 앱은 아닙니다. 지금 생각하면 소스페소는 대부분의 페이지가 정적이며 일부 컴포넌트만 상호작용이 필요한 사이트에 가까우리라 생각합니다.

이런 경우에는 SSR만 하는 MPA도 괜찮습니다. 하지만 Docusaurus가 SPA로 전향하거나, 여러 모던 풀스택 프레임워크들이 첫 페이지만 서버에서 그려주고, 그 후에는 SPA로 전환하는데에는 나름 이유가 있다고 생각합니다. 그럼에도 일단은 MPA도 좋아보이고, 나중에 SPA로 전환하고 싶으면 이사갈 수 있는 유연한 프레임워크를 고르고 싶습니다.

HTMX 등은 이러한 이유로 유보합니다. HTMX는 흥미로운 접근이지만, 유려한 동적인 컴포넌트를 잘 지원하려면 웹 컴포넌트 등과 같이 사용하지 않으면 안 되기 때문입니다.

또 vitest를 사용하기 때문에 webpack이나 다른 번들러보다는, vite를 사용하는 풀스택 프레임워크를 더 선호합니다. 예를 들어 Next.js는 이러한 이유로 배제하고. Remix를 포함한 대부분의 생태계는 Vite를 중심으로 대동단결하고 있으니 이사를 갈 때에도 큰 문제는 없을 것입니다.

Svelte는 최근에 메이저 버전이 올라가기도 했고, 생태계의 지원이 아쉬운 부분이 있어 유보합니다.

Vue는 탐정토끼가 실무에서 사용해보기도 했고, 여러모로 생태계가 풍부합니다. 그럼에도 미래에 들어올지도 모르는 clojurescript 등 여러 언어들에서 잘 지원되지 않기 때문에, 언어에 대한 결정에 큰 제약을 가하기에 유보합니다.

Qwik도 탐정토끼가 실무에서 사용해보기도 했지만, 마이너하고 생태계가 빈약합니다. 최근에 testing-library 지원이 들어오기도 했지만, 아쉬움이 남아서 유보합니다.

Solid는 나름 생태계 지원도 괜찮은 편이고, React와 적당히 비슷하면서, ClojureScript 등에서도 잘 지원합니다. 그럼에도 일단은...

## 결정

풀스택을 지원하며, 다양한 UI 프레임워크가 어우러질 수 있고, MPA와 SPA를 모두 지원하며, 적당히 대중적이면서도 실험적인 Astro로 일단 결정합니다.

한편으로 동적인 UI는 Astro의 island를 토대로 대중적인 React를 이용하려 합니다. React 생태계도 최근에 서버 액션과 React Compiler가 나오는 등, 주류이면서도 급진적으로 발전을 선도하고 있습니다. 물론 다른 프레임워크보다 비교할 수 없이 강력하고 풍부한 생태계를 활용할 수 있는 게 가장 큰 이유입니다.

## 유보

나중에 소스페소 API를 제공하거나 모바일 앱이 필요하다거나, 이런저런 이유로 백엔드를 분리하게 될 수도 있을 것입니다. 그때에는 백엔드 프레임워크 의사결정을 하겠습니다.

Astro는 다양한 프레임워크를 지원하기 때문에, 추후에 React 말고 다른 프레임워크를 다양한 페이지에 실험해볼 수도 있을 것입니다.물론 Astro로 개발을 하면서 제약이 너무 많다고 판단되면, 앞서 이야기한 것처럼 다른 프레임워크로 이사갈 수도 있고요. 통일하게 될 수도 있습니다.

그에 대비하기 위해서라도 프레임워크에 너무 의존하기 보다는, 경계를 긋고 대부분의 핵심 로직을 순수 typescript로 분리해서 작성하기를 권장합니다. UI 프레임워크에 너무 의존하는 개발을 하면 다양성과 실험이 우리에게 유지보수의 고통으로 다가오게 될 것입니다.