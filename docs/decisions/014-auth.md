# 인증 : better-auth

상태 : proposed

## 역사

### 2024년 11월 9일 탐정토끼가 일단 better-auth로 결정함

## 맥락과 이유

인증을 직접 구현하기는 귀찮은 일이기도 하지만, 보안을 하나하나 신경 쓰기도 어려운 일입니다. 시중에 그런 이유로 여러 인증 라이브러리나 서비스들이 있습니다. supabase auth나 lucia-auth, auth.js 등등...

supabase auth는 좋긴 하지만 특정 서비스에 종속되고 싶진 않았습니다.

lucia-auth가 그래서 유망해보였는데, lucia는 v3가 나오지 않기로 하면서. 사실상 직접 구현하는 사람을 위한 참고용 구현이 되었다고 합니다.

auth.js도 오픈소스이고 다양한 프로젝트를 지원하는데요. 투명한 의존성 주입보다는, 이런저런 provider나 plugin을 써야 하는 게 좀 답답했습니다.

## 결정

better-auth는 api를 보았더니 이메일과 패스워드를 중심으로, 어떤 기능을 구현해서 넣어주면 되는지가 투명하게 보였습니다. 지원하는 DB 구현체가 Auth.js 보다는 적었는데요. 어차피 저희는 SQL database를 쓸 거라 큰 문제는 아니었습니다. 물론 오픈소스이기도 하고요. Astro 연동도 퍼스트 클래스로 지원을 하고 있었습니다.

## 유보

이런 인증 서비스는 강하게 기능을 제약합니다. api로 한 번 감싸두긴 했습니다만, 나중에 이사를 가기는 어려울 수도 있습니다. 다만 저희가 그렇게 고도의 인증이나 권한 관리가 필요하진 않고요. 저희의 핵심 도메인이 아니니 외부 라이브러리를 쓰는 것은 앞으로도 좋은 결정일 것이라 생각합니다.